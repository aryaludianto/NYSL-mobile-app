let data = {
  "overView": {
      "teams": ["AJ Katzenmaier", "Greenbay", "Howard A Yeager", "Marjorie P Hart", "North", "South"],
      "dates": [
          "2019-06-22T09:30:00+0200", //1 
          "2019-06-22T13:00:00+0200", //2
          "2019-06-23T09:30:00+0200", //3
          "2019-06-29T09:30:00+0200", //4
          "2019-06-30T09:30:00+0200", //5 
          "2019-07-06T09:30:00+0200", //6
          "2019-07-06T13:00:00+0200", //7
          "2019-07-07T09:30:00+0200", //8
          "2019-07-07T13:00:00+0200", //9
          "2019-07-13T09:30:00+0200", //10
          "2019-07-14T09:30:00+0200", //11
          "2019-07-14T13:00:00+0200", //12
          "2019-07-20T13:00:00+0200", //13
          "2019-07-21T09:30:00+0200", //14
          "2019-07-21T13:00:00+0200", //15
          "2019-07-27T13:00:00+0200", //16
          "2019-07-28T09:30:00+0200", //17
          "2019-07-28T13:00:00+0200", //18
          "2019-08-03T09:30:00+0200", //19
          "2019-08-03T13:00:00+0200", //20
          "2019-08-10T09:30:00+0200", //21
          "2019-08-10T13:00:00+0200", //22
          "2019-08-11T09:30:00+0200", //23
          "2019-08-11T13:00:00+0200", //24
          "2019-08-17T09:30:00+0200", //25
          "2019-08-17T13:00:00+0200", //26
          "2019-08-18T09:30:00+0200", //27
          "2019-08-18T13:00:00+0200", //28
          "2019-08-24T09:30:00+0200", //29
          "2019-08-25T09:30:00+0200", //30
      ]
  },
  "teams": [
      {
      "teamName": "AJ Katzenmaier",
      "teamPlayers": ["Harrison Thomas", "Lewis Hart", "Alfie Russell", "Sebastian Ross", "Declan Burke", "Abram Guzman", "Oakley Bowers", "Drake Hardin","Adonis Norton", "Xavier Harris", "Daniel Ockalis"],
      "teamGoals": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      "sumOfGoals": 0,
      "location": "24 W. Walton St., Chicago, IL 60610",
      "map": "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2969.654246115728!2d-87.63124444878233!3d41.90029237911847!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x880fd34e07f6bac3%3A0x68a82e5d59952c86!2s24+W+Walton+St%2C+Chicago%2C+IL+60610%2C+USA!5e0!3m2!1sen!2snl!4v1557932229690!5m2!1sen!2snl",
      "wins": 0,
      "losses": 0,
      "draws": 0,
      "gamesPlayed": 0,
      "points": 0,
  },
  {
      "teamName": "Greenbay",
      "teamPlayers": ["Tyler Stevens", "Brandon Davies", "Alexander Hart", "Frankie White", "Edward Cole", "Kolby Wright", "Ethan Galloway", "Quentin Hicks", "Aydin Wolf", "Caden Sanchez", "Michael Mc'Laren"],
      "teamGoals": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      "sumOfGoals": 0,
      "location": "1734 N. Orleans St., Chicago, IL 60614",
      "map": "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2969.654246115728!2d-87.63124444878233!3d41.90029237911847!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x880fd34e07f6bac3%3A0x68a82e5d59952c86!2s24+W+Walton+St%2C+Chicago%2C+IL+60610%2C+USA!5e0!3m2!1sen!2snl!4v1557932229690!5m2!1sen!2snl",
      "wins": 0,
      "losses": 0,
      "draws": 0,
      "gamesPlayed": 0,
      "points": 0
  },
  {
      "teamName": "Howard A Yeager",
      "teamPlayers": ["Arthur Holland", "Patrick Burns", "Charles Clark", "Scott West", "Joel Thomson", "John Kim", "Giovanny Grant", "Dustin Hill", "Kendrick Mcdonald", "Justus Alston", "Justin Johnas"],
      "teamGoals": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      "sumOfGoals": 0,
      "location": "2245 N. Southport Ave., Chicago, IL 60614",
      "map": "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2969.654246115728!2d-87.63124444878233!3d41.90029237911847!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x880fd34e07f6bac3%3A0x68a82e5d59952c86!2s24+W+Walton+St%2C+Chicago%2C+IL+60610%2C+USA!5e0!3m2!1sen!2snl!4v1557932229690!5m2!1sen!2snl",
      "wins": 0,
      "losses": 0,
      "draws": 0,
      "gamesPlayed": 0,
      "points": 0
  },
  {
      "teamName": "Marjorie P Hart",
      "teamPlayers": ["Bobby John", "Oliver Cunningham", "Joel Gray", "Oliver Watts", "Rory Robertson", "Alessandro Sloan", "Maxim O'brien", "Elliott Peters", "Gael Chaney", "Bradyn Francis", "Brandon Sterener"],
      "teamGoals": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      "sumOfGoals": 0,
      "location": "2625 N. Orchard St., Chicago, IL 60614",
      "map": "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2969.654246115728!2d-87.63124444878233!3d41.90029237911847!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x880fd34e07f6bac3%3A0x68a82e5d59952c86!2s24+W+Walton+St%2C+Chicago%2C+IL+60610%2C+USA!5e0!3m2!1sen!2snl!4v1557932229690!5m2!1sen!2snl",
      "wins": 0,
      "losses": 0,
      "draws": 0,
      "gamesPlayed": 0,
      "points": 0
  },
  {
      "teamName": "North",
      "teamPlayers": ["Nathan Bell", "Daniel Young", "Stanley Knight", "Luca White", "Oliver Thompson", "Jayson Mccray", "Easton Meyers", "Jaeden Mullins", "Francisco O'neal", "Jonathon Floyd", "Odonal Mayers"],
      "teamGoals": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      "sumOfGoals": 0,
      "location": "N. Fremont St., Chicago, IL 60614",
      "map": "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2969.654246115728!2d-87.63124444878233!3d41.90029237911847!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x880fd34e07f6bac3%3A0x68a82e5d59952c86!2s24+W+Walton+St%2C+Chicago%2C+IL+60610%2C+USA!5e0!3m2!1sen!2snl!4v1557932229690!5m2!1sen!2snl",
      "wins": 0,
      "losses": 0,
      "draws": 0,
      "gamesPlayed": 0,
      "points": 0
  },
  {
      "teamName": "South",
      "teamPlayers": ["Aaron Gallagher", "Cameron Woods", "Isaac Hughes", "Max Poole", "Scott Holmes", "Julian Pennington", "Bobby Stewart", "Wyatt Cole", "Ramiro Hines", "Kobe Wolfe", "Tom Goldstein"],
      "teamGoals": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      "sumOfGoals": 0,
      "location": "1409 N. Ogden Ave., Chicago, IL 60610",
      "map": "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2969.654246115728!2d-87.63124444878233!3d41.90029237911847!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x880fd34e07f6bac3%3A0x68a82e5d59952c86!2s24+W+Walton+St%2C+Chicago%2C+IL+60610%2C+USA!5e0!3m2!1sen!2snl!4v1557932229690!5m2!1sen!2snl",
      "wins": 0,
      "losses": 0,
      "draws": 0,
      "gamesPlayed": 0,
      "points": 0
  }],
  games: []
}

//creates games relative to the amount of teams (each team compete twice against each other team)
const createGames = () => {

  let arr = data["overView"]["teams"]
  let numOfGames = arr.length * (arr.length-1);

  for (let i=0; i < numOfGames; i++){
      let gameObj =  {
          "gameNum": i,
          "date": "",
          "location": "",
          "map": "",
          "alreadyPlayed": false,
          "homeTeam": "",
          "awayTeam": "",
          "homeGoals": null,
          "awayGoals": null,
          "homeScorers": [],
          "awayScorers": [],
          };
      data["games"].push(gameObj)
  }    
}

//goes over every game created and adds which team (by name) competing - and whether the team is home and away + other data (location and date)
const fillInGames = () => {
  
  let arr = data["overView"]["teams"];
  let numOfGames = arr.length * (arr.length-1);
  let games = [];
  let counter = 1;
  let i = 0;

  //creates one set of games
  while(i < numOfGames/2){
      j = 0;
      let length = arr.length;

      for (let j = 1; j < length; j++){
          let game = [];

          if (j + counter < arr.length + 1){
              game.push(j);
              game.push(j + counter);
          } else {
              continue;
          }

          games.push(game);
          i++
      }
      counter++;
  }

  //creates second set of games
  let length = games.length;
  for (let i=0; i < length; i++){
      games.push(games[i]);
  }

  //fills in the names, dates, locations and maps
  for (let i=0; i < data["games"].length; i++){

      let homeIndex = games[i][0];
      let awayIndex = games[i][1];
      
      //fills in names
      if (i < 15){
          data["games"][i]["homeTeam"] = arr[homeIndex-1];
          data["games"][i]["awayTeam"] = arr[awayIndex-1];
      } else {
          data["games"][i]["awayTeam"] = arr[homeIndex-1];
          data["games"][i]["homeTeam"] = arr[awayIndex-1];
      }

      //fills in dates
      let game = data["games"][i];
      let date = data["overView"]["dates"][i];

      game["date"] = date;

      //fills in location
      let indexHome = data["overView"]["teams"].indexOf(game["homeTeam"]);
      
      game["location"] = data["teams"][indexHome]["location"];
      game["map"] = data["teams"][indexHome]["map"];
  }
}

//determine for other functions how many games had been played relative to today's date
const gamesPlayed = dateOfToday => {

  let numOfGames = 0;

  for (let i=0; i < data["overView"]["dates"].length; i++){
      
      let dateOfGame = data["overView"]["dates"][i];

      if (dateOfToday > dateOfGame){
          
          data["games"][i]["alreadyPlayed"] = true;
          numOfGames++;
      }
  }    
  
  for (let i=0; i < numOfGames; i++){
      
      let game = data["games"][i];

      let indexHome = data["overView"]["teams"].indexOf(game["homeTeam"]);
      let indexAway = data["overView"]["teams"].indexOf(game["awayTeam"]);

      data["teams"][indexHome]["gamesPlayed"]++;
      data["teams"][indexAway]["gamesPlayed"]++;
  }
}

const numOfGames = () => {
  
  let gameCounter = 0;
  
  for (let i=0; i < data["games"].length; i++){
      
      let game = data["games"][i];
      
      if (game["alreadyPlayed"]){
          gameCounter++;
      }

  }
  return gameCounter
}

const goals = (numOfGames) => {

  let goalCatagories = ["homeGoals", "awayGoals"];
  let teamCatagories = ["homeTeam", "awayTeam"];
  let score;

  for (i=0; i < numOfGames; i++){

      // for (let key in gameObj) {
      for (let j=0; j < goalCatagories.length; j++) {
          
          score = Math.floor(Math.random() * 100) + 1;

          // give a 20% adv to home team
          if (j == 0){
              score += 5;
          };

          //add or substract % to different teams - adding or reducing their chance to win
          switch (data["games"][i][teamCatagories[j]]) {
              case "AJ Katzenmaier":
                  score += 5;
                  break;
              case "Greenbay":
                  score += 2.5;
                  break;
              case "Howard A Yeager":
                  // score += 0;
                  break;
              case "Marjorie P Hart":
                  // score += 0;
                  break;
              case "North":
                  score -= 2.5;
                  break;
              case "South":
                  score -= 5;
                  break;
              default: 
                  console.log("error with team switch func");
          }

          //converting chances to score to 0-9 goals
          switch (true) {
              case (99 < score):
                  score = 9;
                  break;
              case (98 < score):
                  score = 8;
                  break;
              case (97 < score):
                  score = 7;
                  break;
              case (95 < score):
                  score = 6;
                  break;
              case (93 < score):
                  score = 5;
                  break;
              case (90 < score):
                  score = 4;
                  break;
              case (80 < score):
                  score = 3;
                  break;
              case (65 < score):
                  score = 2;
                  break;
              case (40 < score):
                  score = 1;
                  break;
              case (score <= 40):
                  score = 0;
                  break;
              default: 
                  console.log("error with calculating scores");
          }

          //adding to a certain game (["games"][i]), to a certain catagory (homeGoals or awayGoals) - the score that was randomized
          data["games"][i][goalCatagories[j]] = score;
      }
  }
}

const scorers = (numOfGames) =>{

  for (i=0; i < numOfGames; i++){

      let homeGoals = data["games"][i]["homeGoals"];
      let homeTeam = data["games"][i]["homeTeam"];
      let indexOfHomeTeam = data["overView"]["teams"].indexOf(homeTeam);

      let awayGoals = data["games"][i]["awayGoals"];
      let awayTeam = data["games"][i]["awayTeam"];
      let indexOfAwayTeam = data["overView"]["teams"].indexOf(awayTeam);

      let homeScorers = data["games"][i]["homeScorers"];
      let awayScorers = data["games"][i]["awayScorers"];

      //randomize the chance to score for each player (of a team that actually scored). bigger the chances to lower indexes
      //indexes: 0-1: attacker(25% to score), 2-3: midfielder(15% to score), 4-5: defensive-midfielder(5% to score), 6-7: defenders(3% to score), 8-9: defenders(2% to score), 10: goalkeeper(0% to score)
      const randomIndexScorer = () => {
          let randomScore = Math.floor(Math.random() * 100 + 1);
          let indexOfScorer;

          switch (true) {
              case (98 < randomScore):
                  indexOfScorer = 9;
                  break;
              case (96 < randomScore):
                  indexOfScorer = 8;
                  break;
              case (93 < randomScore):
                  indexOfScorer = 7;
                  break;
              case (90 < randomScore):
                  indexOfScorer = 6;
                  break;
              case (85 < randomScore):
                  indexOfScorer = 5;
                  break;
              case (80 < randomScore):
                  indexOfScorer = 4;
                  break;
              case (65 < randomScore):
                  indexOfScorer = 3;
                  break;
              case (50 < randomScore):
                  indexOfScorer = 2;
                  break;
              case (25 < randomScore):
                  indexOfScorer = 1;
                  break;
              case (randomScore <= 25):
                  indexOfScorer = 0;
                  break;
              default: 
                  console.log("error with calculating scores");
          }

          return indexOfScorer;
      }

      //put the sum of goals for each scorer that scored in the general data["teams"]["teamGoals"] information.
      //also Sums up the total number of goals for the team
      //once for the ohme and once for the away.
      for (let j=0; j < homeGoals; j++){
          
          let indexHomeScorer = randomIndexScorer();

          let timeScored = Math.floor(Math.random() * 90);
          let scorer = data["teams"][indexOfHomeTeam]["teamPlayers"][indexHomeScorer];
          let tempArr = [];
          tempArr.push(scorer);
          tempArr.push(timeScored);

          homeScorers.push(tempArr);

          //add to the scorer goals on "teams" (in data)
          data["teams"][indexOfHomeTeam]["teamGoals"][indexHomeScorer]++;
          data["teams"][indexOfHomeTeam]["sumOfGoals"]++;
      }

      //sorting scorers by who scored the soonest to latest
      homeScorers.sort(function (a, b){
          var valueA, valueB;

          valueA = a[1];
          valueB = b[1];

          if (valueA < valueB){
              return -1;
          }
          else if (valueA > valueB) {
              return 1;
          }
          else {
              return 0;
          }
      });

      for (let j=0; j < awayGoals; j++){
          
          let indexAwayScorer = randomIndexScorer(); 

          let timeScored = Math.floor(Math.random() * 90);
          let scorer = data["teams"][indexOfAwayTeam]["teamPlayers"][indexAwayScorer];
          let tempArr = [];
          tempArr.push(scorer);
          tempArr.push(timeScored);

          awayScorers.push(tempArr);

          //add to the scorer goals on "teams" (in data)
          data["teams"][indexOfAwayTeam]["teamGoals"][indexAwayScorer]++;
          data["teams"][indexOfAwayTeam]["sumOfGoals"]++;
      }

      //sorting scorers by who scored the soonest to latest
      awayScorers.sort(function (a, b){
          var valueA, valueB;

          valueA = a[1];
          valueB = b[1];

          if (valueA < valueB){
              return -1;
          }
          else if (valueA > valueB) {
              return 1;
          }
          else {
              return 0;
          }
      });
  }
}

const fillInTeams = (numOfGames) => {

  // for (let i=0; i < data["games"].length; i++){
  for (let i=0; i < numOfGames; i++){
      
      game = data["games"][i];

      let indexHome = data["overView"]["teams"].indexOf(game["homeTeam"]);
      let indexAway = data["overView"]["teams"].indexOf(game["awayTeam"]);

      if (game["homeGoals"] > game["awayGoals"]){

          data["teams"][indexHome]["wins"]++;
          data["teams"][indexHome]["points"] += 3;
          data["teams"][indexAway]["losses"]++;
      }
      else if (game["homeGoals"] < game["awayGoals"]){

          data["teams"][indexAway]["wins"]++;
          data["teams"][indexAway]["points"] += 3;
          data["teams"][indexHome]["losses"]++;

      } else {
          
          data["teams"][indexAway]["draws"]++;
          data["teams"][indexAway]["points"]++;
          data["teams"][indexHome]["draws"]++;
          data["teams"][indexHome]["points"]++;

      }
  }
}

const bestTeamTable = () => {

  filteredTeams = data["teams"].filter(() => true);
  filteredTeams.sort((a, b) => (a["points"] < b["points"]) ? 1 : (a["points"] === b["points"]) ? ((a["wins"] < b['wins']) ? 1 : (a["wins"] === b["wins"]) ? ((a["draws"] < b['draws']) ? 1 : (a["draws"] === b["draws"]) ? ((a["losses"] > b['losses']) ? 1 : (a["losses"] === b["losses"]) ? ((a["sumOfGoals"] < b['sumOfGoals']) ? 1 : -1) : -1) : -1): -1) : -1 );

  filteredTeams[0]["place"] = 1;
  let teamPlace = 1;
  
  for (let i=1; i < filteredTeams.length; i++){
      
      if (filteredTeams[i]["points"] == filteredTeams[i-1]["points"] && filteredTeams[i]["wins"] == filteredTeams[i-1]["wins"] && filteredTeams[i]["draws"] == filteredTeams[i-1]["draws"] && filteredTeams[i]["losses"] == filteredTeams[i-1]["losses"] && filteredTeams[i]["sumOfGoals"] == filteredTeams[i-1]["sumOfGoals"]){
          teamPlace++;
          filteredTeams[i]["place"] = "-";
      }
      else{
          teamPlace++;
          filteredTeams[i]["place"] = teamPlace;
      }
  }

  return filteredTeams;
}

const bestScorerTable = () => {
  
  let scorers = [];    

  for (let i=0; i < data["teams"].length; i++){
      for (let j=0; j < data["teams"][i]["teamPlayers"].length; j++){
          let player = {};
          player["player"] = data["teams"][i]["teamPlayers"][j];
          player["team"] = data["teams"][i]["teamName"];
          player["score"] = data["teams"][i]["teamGoals"][j];

          scorers.push(player);
      }
  }

  scorers.sort((a, b) => (a["score"] < b["score"]) ? 1 : -1);

  const filteredScorers = scorers.filter(scorer => scorer["score"] > 0);


  filteredScorers[0]["place"] = 1;
  let place = 1 

  for (let i=1; i < filteredScorers.length; i++){
      place++;
      if (filteredScorers[i]["score"] === filteredScorers[i-1]["score"]){
          filteredScorers[i]["place"] = "-";
      } else {
          
          filteredScorers[i]["place"] = place;
      }
      
  }

  let index = 0;
  for (let i=0; i < filteredScorers.length; i++){
      if (filteredScorers[i]["place"] == "-" || filteredScorers[i]["place"] < 6){
          index++;
      } else {
          break;
      }
  }

  return filteredScorers;

  //test
  // for (let j=0; j < index; j++){
  //     console.log(scorers[j]["place"] + " " + scorers[j]["player"] + " - " + scorers[j]["team"] + " - " + scorers[j]["score"]);
  // }
}

const fullDate = () => {

  for (let i=0; i < data["games"].length; i++){
      let game = data["games"][i];
      
      let date = new Date(game["date"]);

      game["day-number"] = date.getDate(); //22
      game["year"] = date.getFullYear() //2018

      switch(date.getDay()){
          case 0:
              game["day"] = "Sunday";
              break;
          case 1:
              game["day"] = "Monday";
              break;
          case 2: 
              game["day"] = "Tuesday";
              break;
          case 3: 
              game["day"] = "Wednesday";
              break;
          case 4: 
              game["day"] = "Thursday";
              break;
          case 5: 
              game["day"] = "Friday";
              break;
          case 6: 
              game["day"] = "Saturday";
              break;
          default:
              console.log("switch function of the days doesnt work")
      }

      switch(date.getMonth()){
          case 0:
              game["month"] = "January";
              break;
          case 1:
              game["month"] = "February";
              break;
          case 2: 
              game["month"] = "March";
              break;
          case 3: 
              game["month"] = "April";
              break;
          case 4: 
              game["month"] = "May";
              break;
          case 5: 
              game["month"] = "June";
              break;
          case 6: 
              game["month"] = "July";
              break;
          case 7: 
              game["month"] = "August";
              break;
          case 8: 
              game["month"] = "September";
              break;
          case 9: 
              game["month"] = "October";
              break;
          case 10: 
              game["month"] = "November";
              break;
          case 11: 
              game["month"] = "December";
              break;
          default:
              console.log("switch function of the months doesnt work")
      }

      let timeOfTheDay;
      if (date.getHours() >= 12){
          timeOfTheDay = "PM";
      }
      else {
          timeOfTheDay = "AM";
      }

      game["time"] = date.getHours() + ":" + date.getMinutes() + " " + timeOfTheDay;
  }
}


//test func
const logging = func => {

  console.log("place - team name - GP = W - D - L - Goals")

  for (i=0; i < filteredTeams.length; i++){
      
      console.log(filteredTeams[i]["place"] + " " + filteredTeams[i]["teamName"] + ": " + + filteredTeams[i]["gamesPlayed"] + " - " + filteredTeams[i]["points"] + " - " + filteredTeams[i]["wins"] + " - " + filteredTeams[i]["draws"] + " - " + filteredTeams[i]["losses"] + " - " + filteredTeams[i]["sumOfGoals"])
  }

}

//callouts
createGames();
fillInGames();
gamesPlayed("2019-08-28T12:00:00+0200");
goals(numOfGames());
scorers(numOfGames());
fillInTeams(numOfGames());
fullDate();

bestTeamTable();
bestScorerTable();

//console.logging:
logging(bestTeamTable);
// console.log(bestScorerTable());
console.log(data["games"]);
console.log(data["teams"]);